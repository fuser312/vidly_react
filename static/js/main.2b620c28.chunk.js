(this.webpackJsonpvidly_react=this.webpackJsonpvidly_react||[]).push([[0],{13:function(e,t,n){e.exports=n(24)},18:function(e,t,n){},19:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),l=n.n(c),o=(n(18),n(19),n(8)),i=n(9),s=n(2),u=n(3),d=n(5),m=n(4),b=[{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"}];var f=[{_id:"5b21ca3eeb7f6fbccd471815",title:"Terminator",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:6,dailyRentalRate:2.5,publishDate:"2018-01-03T19:04:28.809Z",liked:!0},{_id:"5b21ca3eeb7f6fbccd471816",title:"Die Hard",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:5,dailyRentalRate:2.5},{_id:"5b21ca3eeb7f6fbccd471817",title:"Get Out",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:8,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd471819",title:"Trip to Italy",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181a",title:"Airplane",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181b",title:"Wedding Crashers",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181e",title:"Gone Girl",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:7,dailyRentalRate:4.5},{_id:"5b21ca3eeb7f6fbccd47181f",title:"The Sixth Sense",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:4,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd471821",title:"The Avengers",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:7,dailyRentalRate:3.5}];var h=n(1),g=n.n(h);var p=function(e){var t=e.itemsCount,n=e.pageSize,a=e.currentPage,c=Math.ceil(t/n);if(console.log("current page is ".concat(a)),1===c)return null;var l=g.a.range(1,c+1);return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination"},l.map((function(t){return r.a.createElement("li",{key:t,className:t===a?"page-item active":"page-item",onClick:function(){return e.onPageChange(t)}},r.a.createElement("a",{className:"page-link"},t))}))))};function v(e){var t=e.items,n=e.textProperty,a=e.valueProperty,c=e.onItemSelect,l=e.selectedItem;return r.a.createElement("ul",{className:"list-group"},t.map((function(e){return r.a.createElement("li",{key:e[a],onClick:function(){return c(e)},className:l[a]===e[a]?"list-group-item active":"list-group-item"},e[n])})))}v.defaultProps={textProperty:"name",valueProperty:"_id"};var k=v,y=n(12);function S(e){var t=Object(a.useState)("fa fa-heart".concat(e.liked?"":"-o")),n=Object(y.a)(t,1)[0];return r.a.createElement("i",{className:n,style:{cursor:"pointer"},onClick:e.onClick,"aria-hidden":"true"})}var C=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).raiseSort=function(t){var n=Object(o.a)({},e.props.sortColumn);t===n.path?n.order="asc"===n.order?"desc":"asc":(n.path=t,n.order="asc"),e.props.onSort(n)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("thead",null,r.a.createElement("tr",null,this.props.columns.map((function(t){return r.a.createElement("th",{key:t.path||t.key,onClick:function(){return e.raiseSort(t.path)}},t.label)}))))}}]),n}(a.Component),E=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).renderCell=function(e,t){return t.content?t.content(e):g.a.get(e,t.path)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.columns;return r.a.createElement("tbody",null,n.map((function(t){return r.a.createElement("tr",null,a.map((function(n){return r.a.createElement("td",null,e.renderCell(t,n))})))})))}}]),n}(r.a.Component);var _=function(e){var t=e.onLike,n=e.onDelete,a=e.movies,c=e.sortColumn,l=e.onSort,o=[{path:"title",label:"Title"},{path:"genre.name",label:"Genre"},{path:"numberInStock",label:"Stock"},{path:"dailyRentalRate",label:"Rate"},{key:"like",content:function(e){return r.a.createElement(S,{key:e._id,liked:e.liked,onClick:function(){return t(e)}})}},{key:"delete",content:function(e){return r.a.createElement("button",{onClick:function(){return n(e)},className:"btn btn-danger btn-sm"},"Delete")}}];return r.a.createElement("table",{className:"table"},r.a.createElement(C,{columns:o,sortColumn:c,onSort:l}),r.a.createElement(E,{data:a,columns:o}))},R=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={movies:[],pageSize:4,currentPage:1,genres:[],selectedGenre:"",sortColumn:{path:"",order:""}},e.handleDelete=function(t){var n=e.state.movies.filter((function(e){return e._id!==t._id}));e.setState({movies:n})},e.handleLike=function(t){console.log("liked event occurred");var n=Object(i.a)(e.state.movies),a=n.indexOf(t);console.log(t),console.log(a),console.log(n[a].liked),n[a]=Object(o.a)({},n[a]),n[a].liked=!n[a].liked,console.log(n[a].liked),e.setState({movies:n})},e.handlePageChange=function(t){console.log("page no is"+t),e.setState({currentPage:t})},e.handleGenreChange=function(t){console.log("selected genre is "+t),e.setState({selectedGenre:t,currentPage:1})},e.handleSort=function(t){e.setState({sortColumn:t})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=[{name:"All Genres",_id:""}].concat(Object(i.a)(b.filter((function(e){return e}))));this.setState({movies:f,genres:e})}},{key:"render",value:function(){var e=this.state.movies.length,t=this.state,n=t.pageSize,a=t.currentPage,c=t.movies,l=t.selectedGenre,o=t.sortColumn;if(0===e)return r.a.createElement("p",null,"There are no Movies in the database");var i=l&&l._id?c.filter((function(e){return e.genre._id===l._id})):c,s=function(e,t,n){var a=(t-1)*n;return g()(e).slice(a).take(n).value()}(g.a.orderBy(i,[o.path],[o.order]),a,n);return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement(k,{items:this.state.genres,onItemSelect:this.handleGenreChange,selectedItem:this.state.selectedGenre})),r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"Showing ",i.length," movies in the database"),r.a.createElement(_,{movies:s,onLike:this.handleLike,onDelete:this.handleDelete,onSort:this.handleSort,sortColumn:o}),r.a.createElement(p,{onPageChange:this.handlePageChange,itemsCount:i.length,pageSize:n,currentPage:a})))}}]),n}(a.Component);var O=function(){return r.a.createElement("main",{className:"container"},r.a.createElement(R,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(22),n(23);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.2b620c28.chunk.js.map